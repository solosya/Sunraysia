{% set headermenu = _Menu.get({'menuType': 'header', "menuGroupName":"header-main"}) %}

{% set user = _User.getUser() %}
{% set theDate = _AppHelper.getCurrentTimestampBasedOnTimezone() %}
{% set theDate = _AppHelper.getDefaultTimezoneDateTime(theDate, "l, F j, Y") %}

{% set logo = networkData.templatePath~'/static/images/logo.png'%}
{% if networkData.logoMedia | length > 0 %}
    {% set logo = _Media.getMediaUrl(networkData.logoMedia, 650, 144, {'crop': 'fit'} )%}
{% endif %}


<header class="c-header u-mobile-margin-bottom-20 u-tablet-margin-bottom-30 u-desktop-margin-bottom-50">
    
    <div id="search-bar" class="c-search-bar">
        <div class="container">
            <div class="row ">
                <div class="col-12 c-search-bar__container">
                    <form class="c-search-bar__form" method="get" id="searchform" action="{{networkData.defaultBlogUrl}}/search">
                        <button class="c-search-bar__submit" type="submit" id="searchsubmit"></button>
                        <input class="c-search-bar__input" type="text" name="s" placeholder="Search"/>
                    </form>
                </div>
            </div>
        </div>
        <div class="o-rule"></div>
    </div>

    
    <div class="container-fluid">
        <div class="row">





            {# *************************************************
                    Dropdown Fixed Header  (desktop only)
                ***********************************************#}
            <div  id="fixed-header"  class="col-12 c-header__container--fixed">
                
                <div class="c-header__container">
                    {# <button class="c-hamMenu desktop js-hamDesktop" type="button">
                        <span class="transition-med"></span><small>Menu</small>
                    </button> #}

                    <div class="c-header__logo-container c-header__logo-container--fixed">
                        <a href="{{networkData.defaultBlogUrl}}" class="c-header__logo">
                        <img src="{{logo}}" alt="{{networkData.title}}">
                        </a>
                    </div>

                    <div class="c-header__login-buttons-desktop">
                        {% if _User.isGuest() %}
                            <a id="signinBtn" href="javascript:;" class="c-button c-button--blue-bordered u-margin-right-10">Log in</a>
                            <a href="{{networkData.defaultBlogUrl}}/paywall" class="c-button c-button--blue">Subscribe</a>

                        {% else %}
                            <a id="user-menu-button-fixed" href="javascript:;" class="c-header__username">Hi {{user.firstname}}</a>
                            <div id="user-menu-fixed" class="c-user-menu" style="display:none">
                                <p class="c-user-menu__name">{{user.firstname}} {{user.lastname}}</p>
                                <p class="c-user-menu__email">{{user.email}}</p>
                                <hr class="divide divide--dark" />
                                <a class="c-user-menu__link" href="{{networkData.defaultBlogUrl}}/user/edit-profile">My Account</a>
                                <a class="c-user-menu__link" href="{{_AppHelper.getLogoffUrl()}}">Log out</a>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <div class="c-navigation c-navigation--fixed">
                    <ul class="c-navigation__list">
                        {{ this.render('../../partials/_menu.twig', {'menu': headermenu}) | raw }}
                    </ul>
                </div>
            </div>
            {# *************************************************
                                    END
                ***********************************************#}










            <div class="col-12 c-header__container">
                <a href="{{networkData.defaultBlogUrl}}/weather" >
                    <div id="weather" class="c-header__weather-info c-header__weather-info-xs j-weather-panel"></div>
                </a>
                

                <button class="c-hamMenu c-hamMenu--tablet js-hamDevice" type="button">
                    <span class="transition-med"></span>
                </button>


                <div class="c-header__logo-container">
                    <a href="{{networkData.defaultBlogUrl}}" class="c-header__logo">
                        <img src="{{logo}}" class="image-fluid" alt="{{networkData.title}}" />
                    </a>


                    <p id="header-date" class="c-header__date"> {{theDate}} </p>
                </div>







                <div class="c-header__login-buttons-desktop">
                    {% if _User.isGuest() %}
                        <a id="signinBtn" href="javascript:;" class="c-button c-button--blue-bordered u-margin-right-10">Log in</a>
                        <a href="{{networkData.defaultBlogUrl}}/paywall" class="c-button c-button--blue">Subscribe</a>
                    {% else %}
                        {# <a id="signinBtn" href="javascript:;" class="c-button c-button--blue-bordered u-margin-right-10">Log in</a> #}

                        <a id="user-menu-button" href="javascript:;" class="c-header__username">Hi {{user.firstname}}</a>
                        <div id="user-menu" class="c-user-menu" style="display:none">
                            <p class="c-user-menu__name">{{user.firstname}} {{user.lastname}}</p>
                            <p class="c-user-menu__email">{{user.email}}</p>
                            <hr class="divide divide--dark" />
                            <a class="c-user-menu__link" href="{{networkData.defaultBlogUrl}}/user/edit-profile">My Account</a>
                            <a class="c-user-menu__link" href="{{_AppHelper.getLogoffUrl()}}">Log out</a>
                        </div>
                    {% endif %}
                </div>







                <div class="c-header__login-buttons">
                    {% if _User.isGuest() %}
                        <a id="signinBtn" href="javascript:;" class="u-margin-right-5">Log in</a>
                        <a href="{{networkData.defaultBlogUrl}}/paywall" class="">Subscribe</a>
                    {% else %}

                        <a id="user-menu-button-tablet" href="javascript:;" class="c-header__username">Hi {{user.firstname}}</a>
                        <div id="user-menu-tablet" class="c-user-menu" style="display:none">
                            <p class="c-user-menu__name">{{user.firstname}} {{user.lastname}}</p>
                            <p class="c-user-menu__email">{{user.email}}</p>
                            <hr class="divide divide--dark" />
                            <a class="c-user-menu__link" href="{{networkData.defaultBlogUrl}}/user/edit-profile">My Account</a>
                            <a class="c-user-menu__link" href="{{_AppHelper.getLogoffUrl()}}">Log out</a>
                        </div>

                    {% endif %}
                </div>
            </div>






            {# *************************************************
                                    Menu 
                ***********************************************#}
            <div class="col-12 c-navigation">
                <ul class="c-navigation__list">
                    {{ this.render('../../partials/_menu.twig', {'menu': headermenu}) | raw }}
                </ul>
                <div class="c-navigation__icons__search js-searchButton"></div>
            </div>
        </div>
    </div>
</header>






{# *************************************************
             MEGA MENU!!!  (desktop only) 
    ***********************************************#}
{# {{ this.render('../../partials/_mega-menu.twig', {'menu': headermenu}) | raw }} #}







{# *************************************************
             Tablet/ Mobile menu
    ***********************************************#}
<div class="responsive-standalone">
    <div class="c-hamMenu__container">
        <button class="c-hamMenu c-hamMenu--tablet js-hamDevice active" type="button">
            <span class="transition-med"></span>
        </button>
    </div>


    <div id="search-bar" class="c-mobile-search-bar">
        <div class="c-mobile-search-bar__container">
            <form class="c-mobile-search-bar__form" method="get" id="searchform" action="{{networkData.defaultBlogUrl}}/search">
                <button class="c-mobile-search-bar__submit" type="submit" id="searchsubmit"></button>
                <input class="c-mobile-search-bar__input" type="text" name="s" placeholder="Search"/>
            </form>
        </div>
    </div>

    <div class="c-header__mobile-login-buttons d-md-none">
        <p id="mobile-date" class="c-header__mobile-date"></p>
        {% if _User.isGuest() %}
            <div class="c-header__mobile-logins">
                <a id="signinBtn" href="javascript:;" class="c-header__mobile-login u-margin-right-10">Log in</a>
                <a href="{{networkData.defaultBlogUrl}}/paywall" class="c-header__mobile-subscribe">Subscribe</a>
            </div>
        {% else %}
            <a id="user-menu-mobile-button" href="javascript:;" class="c-header__username-mobile">Hi {{user.firstname}}</a>
            <div id="user-menu-mobile" class="c-user-menu" style="display:none">
                <p class="c-user-menu__name">{{user.firstname}} {{user.lastname}}</p>
                <p class="c-user-menu__email">{{user.email}}</p>
                <hr class="divide divide--dark" />
                <a class="c-user-menu__link" href="{{networkData.defaultBlogUrl}}/user/edit-profile">My Account</a>
                <a class="c-user-menu__link" href="{{_AppHelper.getLogoffUrl()}}">Log out</a>
            </div>
        {% endif %}
    </div>

    <ul class="standalone-menu">
        {{ this.render('../../partials/_menu.twig', {
            'menu': headermenu
            }) | raw }}
    </ul>
</div>
<div class="responsive-standalone-overlay"></div>